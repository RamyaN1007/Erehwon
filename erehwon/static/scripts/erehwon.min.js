!function(){var a=function(){function a(a,e){""!==a.trim()&&[].forEach.call(k(a),function(a,e){s[e]=a.getAttribute("data-removeBtn");var f=i("div",{className:"tags-container",innerHTML:x}),g=a.getAttribute("placeholder");g&&f.querySelector("input").setAttribute("placeholder",g),a.style.display="none",u[e]=[],a.parentNode.insertBefore(f,a.nextSibling),""!==a.value&&d(a,e),b(f,a,e),s[e]&&c(f,a,e)})}function b(a,b,c){v[c]=function(a){if("INPUT"===a.target.tagName&&"tag-input"===a.target.className){p=a.target,o=p.parentNode;var d=a.keyCode;q=p.value.trim(),d===t.ENTER||d===t.COMMA?(a.target.blur(),d===t.COMMA&&a.preventDefault(),f(b,c),r&&clearTimeout(r),r=setTimeout(function(){a.target.focus()},10)):d===t.BACK&&g(b,c)}},a.addEventListener("keydown",v[c],!1)}function c(a,b,c){w[c]=function(a){if("remove-tag"===a.target.className){var d=a.target.parentNode.parentNode,e=d.querySelector("input"),f=a.target.parentNode.getAttribute("data-tag");d.removeChild(a.target.parentNode),u[c].splice(u[c].indexOf(f),1),b.value=u[c].join(","),e.focus()}},a.addEventListener("click",w[c],!1)}function d(a,b){var c=a.value.split(","),d=document.createDocumentFragment();c.forEach(function(a){var c=e(a,b);u[b].push(a),d.appendChild(c)}),a.nextSibling.insertBefore(d,a.nextSibling.querySelector("input"))}function e(a,b){var c=i("div",{className:"tag",textContent:a});return s[b]&&(m("tag-padding-btn",c),c.setAttribute("data-tag",a),c.innerHTML+='<span class="remove-tag">&times;</span>'),c}function f(a,b){if(q=q.replace(/,/g,"").trim(),""===q)return p.value="";if(u[b].indexOf(q)>-1){var c=null;return c=k(".tag",o),[].forEach.call(c,function(a){a.firstChild.textContent===q&&(m("exist",a),j()?a.oneEventListener(j(),function(){n("exist",this)}):setTimeout(function(){n("exist",a)},150))}),p.value=""}var d=e(q,b);p.parentNode.insertBefore(d,p),u[b].push(q),p.value="",a.value+=""===a.value?q:","+q}function g(a,b){if(""===q&&0!==u[b].length){u[b].pop();p.previousSibling&&o.removeChild(p.previousSibling),a.value=u[b].join(",")}}function h(){var a=k(".tags-container");[].forEach.call(a,function(a,b){a.removeEventListener("keydown",v[b],!1),s&&a.removeEventListener("click",w[b],!1),a.previousSibling.removeAttribute("style"),a.parentNode.removeChild(a)})}function i(a,b){var c=document.createElement(a);if(b)for(var d in b)void 0!==c[d]&&(c[d]=b[d]);return c}function j(){var a=document.documentElement,b={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd otransitionend"};for(var c in b)if(void 0!==a.style[c])return b[c];return!1}function k(a,b){return(b?b:document).querySelectorAll(a)}function l(a,b){return new RegExp("(^|\\s+)"+a+"(\\s+|$)").test(b.className)}function m(a,b){return l(a,b)?void 0:b.className+=""===b.className?a:" "+a}function n(a,b){b.className=b.className.replace(new RegExp("(^|\\s+)"+a+"(\\s+|$)"),"")}var o,p,q,r,s={},t={ENTER:13,COMMA:188,BACK:8},u={},v=[],w=[],x='<input class="tag-input"></input>';return Element.prototype.addEventListener&&(Element.prototype.oneEventListener=function(a,b){var c=this,d=function(a){c.removeEventListener(a.type,d,!1),b.bind(c,a).call()};c.addEventListener(a,d,!1)}),{init:a,destroy:h}}();a.init(".tagged"),document.querySelector(".js-destroy-tags").addEventListener("click",function(){a.destroy()},!1)}();
//# sourceMappingURL=erehwon.min.js.map